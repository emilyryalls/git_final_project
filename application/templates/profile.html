{% extends "layout.html" %}
{% block body_content %}

<!-- Profile banner -->
<div class="profile-banner w-100 text-white d-flex flex-column align-items-center justify-content-center"
     style="margin: 0; border-radius: 0; padding-top: 60px; padding-bottom: 40px;">
  <div class="profile-info text-center">
    <img src="{{ url_for('static', filename='images/zara.jpeg') }}" alt="Profile Picture"
         class="rounded-circle mb-3 profile-picture">
    <h2 class="mb-0">Hi, {{ session.user }}!</h2>  <!-- changed user.firstname
    to session.user because wasn't being pass by the other way-->

    {% if user.member_since %}
      <p class="text-light">Member since {{ user.member_since.strftime('%B %Y') }}</p>
    {% else %}
      <p class="text-light">Member since: Not available</p>
    {% endif %}
    <p class="fst-italic text-light">"Progress, not perfection."</p>
  </div>
</div>

<!-- Section: Profile overview -->
<div class="py-5">
  <div class="container">
        <div class="row row-cols-1 row-cols-md-2 g-4">

      <!-- Personal info -->
      <div class="col d-flex">
        <div class="card shadow-sm h-100 w-100 d-flex flex-column">
          <div class="card-body d-flex flex-column">
            <h4 class="card-title mb-4">
              <i class="bi bi-person-fill me-2"></i>Your Details
            </h4>
            <p><strong>Date of Birth:</strong>
              {% if user.dob %}
                {{ user.dob.strftime('%d %B %Y') }}
              {% else %}
                <span class="text-muted fst-italic">Not provided</span>
              {% endif %}
            </p>
            <p><strong>Height:</strong> {{ user.height or 'Not set' }} cm</p>
            <p><strong>Weight:</strong> {{ user.weight or 'Not set' }} kg</p>
            <p><strong>BMI:</strong>
              {% if user.height and user.weight %}
                {% set bmi = (user.weight / ((user.height / 100) ** 2)) %}
                {{ bmi | round(1) }}
              {% else %}
                <span class="text-muted fst-italic">Not available</span>
              {% endif %}
            </p>
            <div class="mt-auto pt-3">
              <a href="{{ url_for('profile_settings') }}" class="btn btn-join-filled">
                <i class="bi bi-gear-fill me-2"></i>Edit Profile
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Fitness preferences -->
      <div class="col d-flex">
        <div class="card shadow-sm h-100 w-100 d-flex flex-column">
          <div class="card-body d-flex flex-column">
            <h4 class="card-title mb-4">
              <i class="bi bi-heart-pulse me-2"></i>Fitness Preferences
            </h4>
            <p><strong>Fitness Goal:</strong> {{ user.goal or "Not set" }}</p>
            <p><strong>Dietary Preference:</strong> {{ user.diet or "Not set" }}</p>
            <p><strong>Workout Intensity:</strong> {{ user.experience or "Not set" }}</p>
            <div class="mt-auto pt-3">
              <a href="{{ url_for('profile_settings') }}" class="btn btn-join-filled">
                <i class="bi bi-lightning-fill me-2"></i>Set Preferences
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Milestones -->
      <div class="col d-flex">
        <div class="card shadow-sm h-100 w-100 d-flex flex-column">
          <div class="card-body d-flex flex-column">
            <h4 class="card-title mb-4">
              <i class="bi bi-flag-fill me-2"></i>Milestones
            </h4>
            {% if user.member_since %} <!-- wrapped it in a jinja if. bcause had user with null
            data on member since column-->
            <p><strong>üèÅ Joined:</strong> {{ user.member_since.strftime('%B %Y') }}</p>
            {% else %}
            <p class="text-dark">Member since: Not available</p>  <!--changed to dar because it
            was not visible as text was same color as background-->
            {% endif %}
            <p><strong>üí™ Profile Setup:</strong> <span class="badge bg-success">Completed</span></p>
            <p><strong>üéØ Goal:</strong> <span class="badge bg-info">Fitness goal selected</span></p>
            <div class="mt-auto pt-3">
              <a href="/dashboard" class="btn btn-join-filled">
                <i class="bi bi-star-fill me-2"></i>Your Fitness Journey
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Activity overview -->
      <div class="col d-flex">
        <div class="card shadow-sm h-100 w-100 d-flex flex-column">
          <div class="card-body d-flex flex-column">
            <h4 class="card-title mb-4">
              <i class="bi bi-activity me-2"></i>Your Activity at a Glance
            </h4>
            <p><strong>Days Logged In:</strong> 23</p>
            <p><strong>Last Login:</strong> 2 days ago</p>
            <p><strong>Favourite Activity:</strong> Yoga</p>
            <div class="mt-auto pt-3">
              <a href="/dashboard" class="btn btn-join-filled">
                <i class="bi bi-bar-chart-fill me-2"></i>Go to Dashboard
              </a>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<div class="mb-5"></div>

{% endblock %}

<!-- Allow users to upload and edit profile pics -->

